{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"src/app/app.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ShowproductsComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(cat_r3.name);\n  }\n}\nfunction ShowproductsComponent_tr_27_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"Not available\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ShowproductsComponent_tr_27_ng_container_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"Limited stock\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ShowproductsComponent_tr_27_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"Available\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ShowproductsComponent_tr_27_ng_container_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"Recently added\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ShowproductsComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"p\")(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"p\")(6, \"strong\");\n    i0.ɵɵtext(7, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\")(10, \"strong\");\n    i0.ɵɵtext(11, \"Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\")(14, \"strong\");\n    i0.ɵɵtext(15, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\")(18, \"strong\");\n    i0.ɵɵtext(19, \"Quantity:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, ShowproductsComponent_tr_27_ng_container_20_Template, 2, 0, \"ng-container\", 20);\n    i0.ɵɵtemplate(21, ShowproductsComponent_tr_27_ng_container_21_Template, 2, 0, \"ng-container\", 20);\n    i0.ɵɵtemplate(22, ShowproductsComponent_tr_27_ng_container_22_Template, 2, 0, \"ng-container\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\");\n    i0.ɵɵtemplate(24, ShowproductsComponent_tr_27_ng_container_24_Template, 3, 0, \"ng-container\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"p\")(26, \"strong\");\n    i0.ɵɵtext(27, \"Discount:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"p\")(30, \"strong\");\n    i0.ɵɵtext(31, \"Rating:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"td\")(34, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ShowproductsComponent_tr_27_Template_button_click_34_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const p_r4 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.addToCart(p_r4));\n    });\n    i0.ɵɵtext(35, \"Add to Cart\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"SN: \", i_r5 + 1, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r4.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r4.price, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r4.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", p_r4.quantity === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", p_r4.quantity > 0 && p_r4.quantity < 5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", p_r4.quantity >= 5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", p_r4.days <= 5);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r4.discount, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r4.rating, \"\");\n  }\n}\nfunction ShowproductsComponent_div_30_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r13 = ctx.$implicit;\n    const i_r14 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r14 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r13.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r13.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r13.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r13.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", item_r13.discount, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((item_r13.price - item_r13.discount / 100) * item_r13.quantity);\n  }\n}\nfunction ShowproductsComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"h2\");\n    i0.ɵɵtext(2, \"Your Cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"table\", 23)(4, \"thead\")(5, \"tr\")(6, \"th\");\n    i0.ɵɵtext(7, \"SN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Discount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"Amount\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, ShowproductsComponent_div_30_tr_21_Template, 15, 7, \"tr\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\")(23, \"h4\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ShowproductsComponent_div_30_Template_button_click_25_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.showCart = false);\n    });\n    i0.ɵɵtext(26, \"Back to Products\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"br\");\n    i0.ɵɵelementStart(28, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ShowproductsComponent_div_30_Template_button_click_28_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.placeOrder());\n    });\n    i0.ɵɵtext(29, \"Place Order\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.cartItems);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Total Amount: \", ctx_r2.getTotalAmount(), \"\");\n  }\n}\nexport let ShowproductsComponent = /*#__PURE__*/(() => {\n  class ShowproductsComponent {\n    constructor(http, app) {\n      this.http = http;\n      this.app = app;\n      this.catid = 0;\n      this.minprice = 0;\n      this.maxprice = 60000;\n      this.minrating = 0;\n      this.cartItems = [];\n      this.rating = 0;\n      this.showCart = false;\n      this.orders = [];\n    }\n    ngOnInit() {\n      this.loadCategories();\n    }\n    loadCategories() {\n      const url = `${this.app.baseUrl}admin/getAllCategories`;\n      this.http.get(url).subscribe({\n        next: data => this.categories = data,\n        error: () => window.alert('Something is wrong')\n      });\n    }\n    loadProduct() {\n      const obj = [this.catid, this.minprice, this.maxprice, this.minrating];\n      const url = `${this.app.baseUrl}buyer/getProductsBuyer`;\n      this.http.post(url, obj).subscribe({\n        next: data => {\n          if (data && data.length > 0) {\n            this.products = data;\n          } else {\n            window.alert('No products found with the given criteria.');\n          }\n        },\n        error: () => window.alert('Something is wrong')\n      });\n    }\n    printRating(p) {\n      if (p.rating != 0) {\n        const url = `${this.app.baseUrl}buyer/giveRatingToProduct/${p.id}/${this.app.id}/${p.rating}`;\n        this.http.get(url).subscribe(data => {\n          // console.log(data)\n          if (data) {\n            // this.loadProduct();\n            // console.log(this.products)\n            window.alert('Rating updated successfully.');\n          } else {\n            window.alert('Something went wrong while updating rating.');\n          }\n        });\n      }\n    }\n    addToCart(p) {\n      const url = `${this.app.baseUrl}buyer/addToCart/${p.id}/${this.app.id}`;\n      this.http.post(url, {}).subscribe({\n        next: data => {\n          if (data) {\n            window.alert('Added to cart');\n          } else {\n            window.alert('Something is wrong');\n          }\n        },\n        error: () => window.alert('Something is wrong')\n      });\n    }\n    loadCartProducts() {\n      const url = `${this.app.baseUrl}buyer/getCartProducts/${this.app.id}`;\n      this.http.get(url).subscribe({\n        next: data => {\n          if (data == 0 || data === null) {\n            window.alert(\"Cart is Empty\");\n            this.showCart = false;\n          } else if (data) {\n            this.cartItems = data;\n            this.showCart = true;\n          } else {\n            window.alert('Something is wrong');\n          }\n        },\n        error: () => window.alert('Something is wrong')\n      });\n    }\n    cartProduct() {\n      this.loadCartProducts();\n    }\n    getTotalAmount() {\n      return this.cartItems.reduce((total, item) => total + (item.price - item.discount / 100) * item.quantity, 0);\n    }\n    /*\n      placeOrder() {\n        for (let i = 0; i < this.cartItems.length; i++) {\n    \n          let myArray: any[] = new Array(2);\n          myArray[0] = this.cartItems[i].id;\n          myArray[1] = this.cartItems[i].quantity;\n          console.log(myArray);\n          this.orders.push(myArray);\n        }\n        let url3 = this.app.baseUrl + \"buyer/onPlaceOrder/\" + this.app.id;\n        this.http.post(url3, this.orders).subscribe((data: any) => {\n          console.log(data)\n          if (data == null || data == -1) {\n            window.alert(\"Something went Wrong..\")\n          }\n          else {\n            window.alert(\"Your Order Placed SuccessFulyy...\")\n            this.cartItems = [];\n          }\n        });\n      }*/\n    placeOrder() {\n      // Assuming cartItems is an array of cart IDs\n      const cartIds = this.cartItems.map(item => item.id);\n      const url = `${this.app.baseUrl}buyer/placeOrder/${this.app.id}`;\n      this.http.post(url, cartIds).subscribe({\n        next: response => {\n          if (response === 1) {\n            this.cartItems = []; // Clear cart items\n            this.showCart = false;\n            window.alert('Order placed successfully.');\n          } else {\n            window.alert('Something went wrong while order.');\n          }\n        },\n        error: () => window.alert('Something went wrong while placing the order.')\n      });\n    }\n    static #_ = this.ɵfac = function ShowproductsComponent_Factory(t) {\n      return new (t || ShowproductsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AppComponent));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ShowproductsComponent,\n      selectors: [[\"app-showproducts\"]],\n      decls: 31,\n      vars: 7,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"row\"], [1, \"col-md-6\", \"mb-3\"], [\"for\", \"category\", 1, \"form-label\"], [\"id\", \"category\", \"name\", \"category\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-3\", \"mb-3\"], [\"for\", \"minprice\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"minprice\", \"name\", \"minprice\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"maxprice\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"maxprice\", \"name\", \"maxprice\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"minrating\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"minrating\", \"name\", \"minrating\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-6\", \"d-flex\", \"align-items-end\", \"mb-3\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"col-12\"], [1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"mt-4\", 4, \"ngIf\"], [3, \"value\"], [4, \"ngIf\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"mt-4\"], [1, \"table\", \"table-striped\"], [1, \"btn\", \"btn-warning\", 3, \"click\"]],\n      template: function ShowproductsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"label\", 3);\n          i0.ɵɵtext(4, \"Category:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"select\", 4);\n          i0.ɵɵlistener(\"ngModelChange\", function ShowproductsComponent_Template_select_ngModelChange_5_listener($event) {\n            return ctx.catid = $event;\n          });\n          i0.ɵɵtemplate(6, ShowproductsComponent_option_6_Template, 2, 2, \"option\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 6)(8, \"label\", 7);\n          i0.ɵɵtext(9, \"Min Price:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"input\", 8);\n          i0.ɵɵlistener(\"ngModelChange\", function ShowproductsComponent_Template_input_ngModelChange_10_listener($event) {\n            return ctx.minprice = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 6)(12, \"label\", 9);\n          i0.ɵɵtext(13, \"Max Price:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"input\", 10);\n          i0.ɵɵlistener(\"ngModelChange\", function ShowproductsComponent_Template_input_ngModelChange_14_listener($event) {\n            return ctx.maxprice = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(15, \"div\", 1)(16, \"div\", 2)(17, \"label\", 11);\n          i0.ɵɵtext(18, \"Min Rating:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"input\", 12);\n          i0.ɵɵlistener(\"ngModelChange\", function ShowproductsComponent_Template_input_ngModelChange_19_listener($event) {\n            return ctx.minrating = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 13)(21, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function ShowproductsComponent_Template_button_click_21_listener() {\n            return ctx.loadProduct();\n          });\n          i0.ɵɵtext(22, \"Load Products\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(23, \"div\", 1)(24, \"div\", 15)(25, \"table\", 16)(26, \"tbody\");\n          i0.ɵɵtemplate(27, ShowproductsComponent_tr_27_Template, 36, 10, \"tr\", 17);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function ShowproductsComponent_Template_button_click_28_listener() {\n            return ctx.cartProduct();\n          });\n          i0.ɵɵtext(29, \"Cart\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(30, ShowproductsComponent_div_30_Template, 30, 2, \"div\", 18);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.catid);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.minprice);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.maxprice);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.minrating);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngForOf\", ctx.products);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.showCart);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel]\n    });\n  }\n  return ShowproductsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}